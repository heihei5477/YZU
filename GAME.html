<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>ä¸‰æˆ°å…©å‹çŒœæ‹³æ¨¡æ“¬å™¨</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f0f8ff; }
  h1 { color: #333; }
  button { padding: 10px 20px; margin: 5px; cursor: pointer; font-size: 16px; }
  #resultArea { margin-top: 20px; background: #fff; padding: 15px; border-radius: 6px; box-shadow: 0 0 8px rgba(0,0,0,0.1);}
  #stats { margin-top: 15px; font-weight: bold; }
  #finalResult { font-size: 20px; color: #c62828; margin-top: 15px; }
</style>
</head>
<body>

<h1>ä¸‰æˆ°å…©å‹çŒœæ‹³æ¨¡æ“¬å™¨</h1>

<p>è«‹é»é¸ä½ çš„å‡ºæ‹³ï¼š</p>
<button onclick="playerPlay('çŸ³é ­')">âœŠ çŸ³é ­</button>
<button onclick="playerPlay('å‰ªåˆ€')">âœŒ å‰ªåˆ€</button>
<button onclick="playerPlay('å¸ƒ')">ğŸ– å¸ƒ</button>
<button onclick="resetGame()" style="background:#f44336; color:#fff;">é‡ç½®éŠæˆ²</button>

<div id="resultArea" style="display:none;">
  <h3>å±€æ•¸çµæœ</h3>
  <div id="roundResults"></div>
  <div id="stats"></div>
  <div id="finalResult"></div>
</div>

<script>
  const choices = ['çŸ³é ­', 'å‰ªåˆ€', 'å¸ƒ'];
  let roundsPlayed = 0;
  const maxRounds = 3;
  let results = { 'ç©å®¶å‹': 0, 'Cå‹': 0, 'å¹³æ‰‹': 0 };
  let roundLog = [];
  let gameOver = false;

  function computerPlay() {
    const idx = Math.floor(Math.random() * 3);
    return choices[idx];
  }

  function judge(player, computer) {
    if (player === computer) return 'å¹³æ‰‹';
    if (
      (player === 'çŸ³é ­' && computer === 'å‰ªåˆ€') ||
      (player === 'å‰ªåˆ€' && computer === 'å¸ƒ') ||
      (player === 'å¸ƒ' && computer === 'çŸ³é ­')
    ) return 'ç©å®¶å‹';
    return 'Cå‹';
  }

  function playerPlay(playerChoice) {
    if (gameOver) {
      alert('éŠæˆ²å·²çµæŸï¼Œè«‹é‡ç½®å†ä¾†ä¸€è¼ªå–”ï½');
      return;
    }

    const compChoice = computerPlay();
    const outcome = judge(playerChoice, compChoice);
    roundsPlayed++;
    results[outcome]++;
    roundLog.push(`ç¬¬${roundsPlayed}å±€ï¼šä½ å‡º${playerChoice}ï¼ŒCå‡º${compChoice} â†’ ${outcome}`);

    updateDisplay();

    if (results['ç©å®¶å‹'] === 2 || results['Cå‹'] === 2 || roundsPlayed === maxRounds) {
      endGame();
    }
  }

  function updateDisplay() {
    document.getElementById('resultArea').style.display = 'block';
    document.getElementById('roundResults').innerHTML = roundLog.join('<br/>');

    const winRate = ((results['ç©å®¶å‹'] / roundsPlayed) * 100).toFixed(1);
    const loseRate = ((results['Cå‹'] / roundsPlayed) * 100).toFixed(1);
    const drawRate = ((results['å¹³æ‰‹'] / roundsPlayed) * 100).toFixed(1);

    document.getElementById('stats').innerHTML = `
      <br/>å…±é€²è¡Œ ${roundsPlayed} å±€<br/>
      ä½ å‹ç‡ï¼š${winRate}%<br/>
      Cå‹ç‡ï¼š${loseRate}%<br/>
      å¹³æ‰‹ç‡ï¼š${drawRate}%
    `;
  }

  function endGame() {
    gameOver = true;
    let finalMessage = '';

    if (results['ç©å®¶å‹'] === 2) {
      finalMessage = 'ğŸ‰ ä½ è´å¾—äº†é€™å ´æ¯”è³½ï¼';
    } else if (results['Cå‹'] === 2) {
      finalMessage = 'ğŸ˜ˆ C ç²å‹ï¼Œä½ ä¸‹æ¬¡å†åŠ æ²¹ï¼';
    } else {
      if (results['ç©å®¶å‹'] === results['Cå‹']) {
        finalMessage = 'ğŸ¤ é›™æ–¹å¹³æ‰‹ï¼Œå‹¢å‡åŠ›æ•µå‘¢ï½';
      } else if (results['ç©å®¶å‹'] > results['Cå‹']) {
        finalMessage = 'ğŸ‰ é›–æ²’å…©å‹ï¼Œä½†ä½ å°å‹ä¸€å±€ï¼';
      } else {
        finalMessage = 'ğŸ˜ˆ C ç•¥å‹ä¸€ç±Œï½';
      }
    }

    document.getElementById('finalResult').textContent = finalMessage;
  }

  function resetGame() {
    roundsPlayed = 0;
    results = { 'ç©å®¶å‹': 0, 'Cå‹': 0, 'å¹³æ‰‹': 0 };
    roundLog = [];
    gameOver = false;
    document.getElementById('resultArea').style.display = 'none';
    document.getElementById('finalResult').textContent = '';
  }
</script>

</body>
</html>
